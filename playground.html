<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>api-sandbox.de | API Playground</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #fafafa;
        }
        pre::-webkit-scrollbar {
            height: 8px;
            width: 8px;
        }
        pre::-webkit-scrollbar-track {
            background: #1e293b;
        }
        pre::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
    </style>
</head>
<body class="text-slate-900 antialiased min-h-screen flex flex-col py-10">

    <div class="max-w-5xl mx-auto w-full px-6">
        
        <!-- Header / Nav -->
        <header class="mb-10 flex justify-between items-end">
            <div>
                <a href="index.html" class="group flex items-center space-x-2 text-sm font-bold text-slate-400 hover:text-blue-600 transition-colors uppercase tracking-widest mb-4">
                    <svg class="w-4 h-4 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    <span>Zurück zur Startseite</span>
                </a>
                <h1 class="text-4xl font-extrabold tracking-tight">API Playground</h1>
                <p class="text-slate-500 font-medium mt-2">Teste Endpunkte, inspiziere Header und debugge deine Requests live.</p>
            </div>
            <div class="hidden md:block">
                <div class="flex items-center space-x-2 bg-white border border-slate-200 px-3 py-1.5 rounded-full shadow-sm">
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    <span class="text-[10px] font-bold uppercase tracking-widest text-slate-600">Console Ready</span>
                </div>
            </div>
        </header>

        <main class="grid lg:grid-cols-12 gap-8">
            
            <!-- LEFT COLUMN: Request Builder -->
            <div class="lg:col-span-5 space-y-6">
                
                <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-lg shadow-slate-100/50">
                    <h2 class="text-sm font-bold text-blue-600 uppercase tracking-widest mb-4">Request Config</h2>
                    
                    <form id="api-form" class="space-y-4">
                        <!-- Method & URL -->
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-slate-500 uppercase">Endpoint</label>
                            <div class="flex rounded-lg shadow-sm">
                                <select id="method" class="rounded-l-lg border border-r-0 border-slate-200 bg-slate-50 text-slate-700 text-sm font-bold px-3 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="GET">GET</option>
                                    <option value="POST">POST</option>
                                    <option value="PUT">PUT</option>
                                    <option value="PATCH">PATCH</option>
                                    <option value="DELETE">DELETE</option>
                                </select>
                                <input type="url" id="url" value="https://jsonplaceholder.typicode.com/posts/1" placeholder="https://api..." class="flex-1 rounded-r-lg border border-slate-200 text-sm px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-slate-600 w-full" required>
                            </div>
                        </div>

                        <!-- Request Body (Hidden for GET/DELETE) -->
                        <div id="body-container" class="space-y-2 hidden">
                            <label class="text-xs font-bold text-slate-500 uppercase flex justify-between">
                                <span>Request JSON Body</span>
                                <span class="text-slate-300 normal-case font-normal text-[10px]">(application/json)</span>
                            </label>
                            <textarea id="request-body" rows="6" class="w-full rounded-lg border border-slate-200 text-xs px-4 py-3 font-mono text-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y" spellcheck="false">{
    "title": "foo",
    "body": "bar",
    "userId": 1
}</textarea>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" id="send-btn" class="w-full bg-slate-900 text-white px-6 py-3.5 rounded-lg hover:bg-slate-800 transition-all font-semibold shadow-lg shadow-slate-200 flex justify-center items-center space-x-2">
                            <span>Request senden</span>
                            <svg id="btn-icon" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            <svg id="btn-spinner" class="animate-spin h-4 w-4 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        </button>
                    </form>
                </div>

                <!-- Last Request Meta -->
                <div class="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm opacity-60 pointer-events-none" id="req-meta-box">
                    <h2 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-3">Request Log</h2>
                    <div class="font-mono text-xs text-slate-500 space-y-1">
                        <div class="flex gap-2"><span class="font-bold text-slate-700 w-16">Method:</span> <span id="log-method">-</span></div>
                        <div class="flex gap-2"><span class="font-bold text-slate-700 w-16">Time:</span> <span id="log-time">-</span></div>
                    </div>
                </div>

            </div>

            <!-- RIGHT COLUMN: Output -->
            <div class="lg:col-span-7 flex flex-col h-full min-h-[500px]">
                <div class="bg-slate-900 rounded-2xl shadow-2xl shadow-slate-300 flex-1 flex flex-col overflow-hidden text-slate-300 relative">
                    
                    <!-- Console Header -->
                    <div class="bg-slate-800 px-4 py-3 flex justify-between items-center border-b border-slate-700">
                        <span class="text-xs font-bold uppercase tracking-widest text-slate-400">Response Console</span>
                        <div class="flex items-center space-x-3 text-xs font-mono">
                            <span id="status-badge" class="px-2 py-0.5 rounded bg-slate-700 text-slate-400 font-bold">Waiting...</span>
                            <span id="time-badge" class="text-slate-500">0ms</span>
                        </div>
                    </div>

                    <!-- Output Area -->
                    <div class="flex-1 overflow-auto p-0 relative">
                        <pre id="response-output" class="p-4 font-mono text-sm leading-relaxed text-blue-300 min-h-full">
// Die Serverantwort wird hier erscheinen...
// Drücke 'Request senden', um zu starten.
                        </pre>
                    </div>

                    <!-- Footer bar -->
                    <div class="bg-slate-800 px-4 py-2 border-t border-slate-700 flex justify-between items-center text-[10px] text-slate-500 uppercase font-bold tracking-wider">
                        <span>application/json</span>
                        <span>READ-ONLY</span>
                    </div>
                </div>
            </div>

        </main>

        <footer class="mt-16 text-center text-[10px] uppercase tracking-[0.2em] text-slate-400 font-bold">
            <span>&copy; 2026 API-SANDBOX &bull; Playground v1.0</span>
        </footer>
    </div>

    <!-- Logic Script -->
    <script>
        const methodSelect = document.getElementById('method');
        const bodyContainer = document.getElementById('body-container');
        const form = document.getElementById('api-form');
        const sendBtn = document.getElementById('send-btn');
        const btnIcon = document.getElementById('btn-icon');
        const btnSpinner = document.getElementById('btn-spinner');
        
        // Output Elements
        const responseOutput = document.getElementById('response-output');
        const statusBadge = document.getElementById('status-badge');
        const timeBadge = document.getElementById('time-badge');
        const reqMetaBox = document.getElementById('req-meta-box');
        const logMethod = document.getElementById('log-method');
        const logTime = document.getElementById('log-time');

        // Toggle Body Input visibility based on method
        methodSelect.addEventListener('change', () => {
            const method = methodSelect.value;
            if (['GET', 'DELETE'].includes(method)) {
                bodyContainer.classList.add('hidden');
            } else {
                bodyContainer.classList.remove('hidden');
            }
        });

        // Initialize view
        methodSelect.dispatchEvent(new Event('change'));

        // Form Submit Handler
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // UI Loading State
            sendBtn.disabled = true;
            sendBtn.classList.add('opacity-75', 'cursor-not-allowed');
            btnIcon.classList.add('hidden');
            btnSpinner.classList.remove('hidden');
            responseOutput.textContent = "// Loading...";
            responseOutput.classList.add('text-slate-500');
            
            const url = document.getElementById('url').value;
            const method = methodSelect.value;
            const bodyContent = document.getElementById('request-body').value;
            
            let options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            };

            // Add body if allowed method
            if (!['GET', 'DELETE'].includes(method)) {
                try {
                    // Minify json first to validate
                    JSON.parse(bodyContent);
                    options.body = bodyContent;
                } catch (err) {
                    alert("Invalid JSON in request body");
                    resetBtn();
                    return;
                }
            }

            const startTime = performance.now();

            try {
                const response = await fetch(url, options);
                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(0);

                // Handle Content
                let data;
                const contentType = response.headers.get("content-type");
                if (contentType && contentType.indexOf("application/json") !== -1) {
                    data = await response.json();
                } else {
                    data = await response.text();
                }

                // Render UI
                renderResponse(response.status, response.statusText, duration, data);
                
                // Update Log
                reqMetaBox.classList.remove('opacity-60', 'pointer-events-none');
                logMethod.textContent = method;
                logTime.textContent = new Date().toLocaleTimeString();

            } catch (error) {
                renderResponse('ERR', 'Network Error', 0, { error: error.message });
            } finally {
                resetBtn();
            }
        });

        function renderResponse(status, statusText, time, data) {
            // Colors based on Status
            statusBadge.textContent = `${status} ${statusText || ''}`;
            timeBadge.textContent = `${time}ms`;
            
            statusBadge.className = "px-2 py-0.5 rounded font-bold transition-colors duration-300";

            if (status >= 200 && status < 300) {
                statusBadge.classList.add('bg-green-500', 'text-white');
                responseOutput.classList.remove('text-red-400');
                responseOutput.classList.add('text-blue-300');
            } else if (status >= 400) {
                statusBadge.classList.add('bg-red-500', 'text-white');
                responseOutput.classList.remove('text-blue-300');
                responseOutput.classList.add('text-red-400');
            } else {
                statusBadge.classList.add('bg-orange-500', 'text-white');
            }

            // Pretty Print JSON
            if (typeof data === 'object') {
                responseOutput.textContent = JSON.stringify(data, null, 2);
            } else {
                responseOutput.textContent = data;
            }
        }

        function resetBtn() {
            sendBtn.disabled = false;
            sendBtn.classList.remove('opacity-75', 'cursor-not-allowed');
            btnIcon.classList.remove('hidden');
            btnSpinner.classList.add('hidden');
        }
    </script>
</body>
</html>
